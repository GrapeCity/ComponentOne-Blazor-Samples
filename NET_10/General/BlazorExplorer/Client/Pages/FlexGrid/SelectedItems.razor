@page "/FlexGrid/SelectedItems"
@using BlazorExplorer;
@using C1.Blazor.Grid
@using System.Collections.ObjectModel;
@using Localization

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: 60vh;">
    <div>
        <h4 style="text-align: center; margin: 4px;">@FlexGridRes.AllCustomersLabel</h4>
        <FlexGrid @ref="grid" ItemsSource="customers"
                  SelectionMode="GridSelectionMode.ListBox" 
                  HeadersVisibility="GridHeadersVisibility.All"
                  SelectionChanged="OnSelectionChanged"
                  Style="@("max-height:50vh; border: 1px solid #ccc")" >
        </FlexGrid>
    </div>

    <div>
        <h4 style="text-align: center; margin: 4px;">@FlexGridRes.SelectedCustomersLabel</h4>
        @if (grid?.SelectedItems?.Count > 0)
        {
            <FlexGrid ItemsSource="grid.SelectedItems"
                      HeadersVisibility="GridHeadersVisibility.All"
                      IsReadOnly="true"
                      Style="@("max-height:50vh; border: 1px solid #ccc")" >
            </FlexGrid>
        }
        else
        {
            <div style="display: flex; align-items: center; justify-content: center; height: 50vh; text-align: center; border: 1px solid #ccc; padding: 20px; color: #666;">
                @FlexGridRes.SelectCustomersMessage
            </div>
        }
    </div>
</div>

<_Sections>
    <Title>@FlexGridRes.SelectedItemsTitle</Title>
    <Description>@FlexGridRes.SelectedItemsDescription</Description>
</_Sections>

@code {
    ObservableCollection<Customer> customers;
    FlexGrid grid;

    protected override void OnInitialized()
    {
        customers = Customer.GetCustomerList(100);
    }

    private void OnSelectionChanged(object sender, GridSelectionEventArgs e)
    {
        StateHasChanged();
    }
}
